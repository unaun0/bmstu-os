# –§–∞–π–ª—ã-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —è–¥—Ä–∞ Linux

–í —Ä–µ–∂–∏–º–µ —è–¥—Ä–∞ —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –ø–µ—á–∞—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏. –î–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ö86 ‚Äì —ç—Ç–æ —á–µ—Ç—ã—Ä–µ –∫–∏–ª–æ–±–∞–π—Ç–∞.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ö–µ–º—É —Ç–æ–≥–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ñ–∞–π–ª–æ–º-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é:

![](/img/img-01.png)

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–∫–∏–º —Ñ–∞–π–ª–æ–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `start`, `stop`, `next` –∏ `show`. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–µ —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Å–∏—Å—Ç–µ–º–∞–º —è–¥—Ä–∞ –æ–Ω–∏ –Ω–∞—á–∏–Ω–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å–≤—è–∑–∞–Ω–Ω–æ–º—É —Å –Ω–∏–º–∏ —Ñ–∞–π–ª—É –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `/proc`. 

–ù–∞–∏–±–æ–ª–µ–µ –∑–∞–ø—É—Ç—ã–≤–∞—é—â–∏–º –≤—ã–≥–ª—è–¥–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `stop`, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –≤ —Ç—Ä—ë—Ö —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö. –ï—ë –≤—ã–∑–æ–≤ –ø–æ—Å–ª–µ
`start` –æ–∑–Ω–∞—á–∞–µ—Ç –æ–∫–æ–Ω—á–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø–æ —Ä–∞—Å–ø–µ—á–∞—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö. –ï—ë –≤—ã–∑–æ–≤ –ø–æ—Å–ª–µ `show` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—á–∞—Ç–∏ –≤ –±—É—Ñ–µ—Ä (–æ–±—ã—á–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `seq_printf`) —Å–ª—É—á–∏–ª–æ—Å—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –∏ —ç—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –ø–µ—á–∞—Ç–∏ –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞. –ê –µ—ë –≤—ã–∑–æ–≤ –ø–æ—Å–ª–µ `next` ‚Äì –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ø–µ—á–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –Ω—É–∂–Ω–æ –ª–∏–±–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å —Ä–∞–±–æ—Ç—É, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

–°–Ω–∞—á–∞–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è `start` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–µ—á–∞—Ç—å –ø–æ –±–ª–æ—á–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º, –∞ —Ñ—É–Ω–∫—Ü–∏—è `next` –∏, –≤–æ–∑–º–æ–∂–Ω–æ, `show` –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—á–∞—Ç–∏ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –Ω—É–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –±–ª–æ—á–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º. –ö–æ–≥–¥–∞ –≤—Å—ë –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ, –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞ `next` –∏ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º—ã–π —Å–ª—É—á–∞–π –≤—ã–∑–æ–≤–∞ `stop`, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `start`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –¥–æ–ª–∂–µ–Ω —É–∂–µ –ø—Ä–æ–∏–Ω–∏—Ü–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–ª—å–Ω–µ–π—à—É—é —Ä–∞—Å–ø–µ—á–∞—Ç–∫—É –ø–æ —Å–∏–º–≤–æ–ª—å–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º.

–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–º-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–≤–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è —Å –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–µ–π—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é (—ç—Ç–æ —Ç–∞–∫–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ
–∑–∞–ø—É—Ç—ã–≤–∞—é—â–∏–π –º–æ–º–µ–Ω—Ç). –û–¥–∏–Ω –∏–∑ –Ω–∏—Ö –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Ç–µ–∫—É—â–∏–π –æ–±—ä–µ–∫—Ç –¥–ª—è —Ä–∞—Å–ø–µ—á–∞—Ç–∫–∏ –≤ –±—É—Ñ–µ—Ä —Ñ—É–Ω–∫—Ü–∏–µ–π `show` ‚Äì v –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ, –∞ –¥—Ä—É–≥–æ–π (`pos`) –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ —Å—á—ë—Ç—á–∏–∫.

## –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞

* `init`, `exit`, `open`, `release`, `read`, `write` - –¥–ª—è **single**
* `init`, `exit`, `open`, `release`, `read`  - –¥–ª—è **iterator**

## –î–ª—è —á–µ–≥–æ –Ω–∞–º –Ω—É–∂–Ω—ã —Ñ–∞–π–ª—ã-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏? –ó–∞—á–µ–º –∏—Ö –ø—Ä–∏–¥—É–º–∞–ª–∏?

–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —è–¥—Ä–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ü–æ—á–µ–º—É –Ω–∞–ø–∏—Å–∞–Ω—ã `seq` –µ—Å–ª–∏ –µ—Å—Ç—å `copy_from_user` –∏ `copy_to_user`?

–°–∏–∫–≤–µ–Ω—Å—ã –±—ã–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —è–¥—Ä–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏—Ç–µ—Ä–∞—Ç–æ—Ä –∫–æ—Ç–æ—Ä—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å.

## Iterator

### –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è stop?

* –ö–æ–≥–¥–∞ –±—É—Ñ–µ—Ä –ø—É—Å—Ç.
* –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `start`, –∫–æ–≥–¥–∞ –±—É—Ñ—Ñ–µ—Ä –ø—É—Å—Ç; –ø–æ—Å–ª–µ `show`, –∫–æ–≥–¥–∞ –±—É—Ñ—Ñ–µ—Ä –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω; –∏ –ø–æ—Å–ª–µ `next`, –∫–æ–≥–¥–∞ –ª–∏–±–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–∏–º –¥–∞–Ω–Ω—ã–º, –ª–∏–±–æ –±—É—Ñ—Ñ–µ—Ä –ø—É—Å—Ç.

### –í—ã–≤–µ—Å—Ç–∏ –∞–¥—Ä–µ—Å–∞ `m` –∏ `v` –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö `next`, `stop` –∏ —Ç.–¥.

–≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–± –Ω–∞–≥–ª—è–¥–Ω–æ —É–≤–∏–¥–µ—Ç—å, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `stop` (–∫–æ–≥–¥–∞ `next()` –≤–µ—Ä–Ω—É–ª `NULL` –∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –≤ –≤—ã–≤–æ–¥–µ –≤ `stop` —É–≤–∏–¥–∏–º –Ω—É–ª–µ–≤–æ–π –∞–¥—Ä–µ—Å)

### –ê —á—Ç–æ –≤ `seq_read_iter` –Ω–∞–º –¥–æ–ª–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–∞ —Ç–æ, —á—Ç–æ `next`, `stop` –∏ —Ç.–¥. –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ç–æ—á–∫–∞–º–∏ –≤—Ö–æ–¥–∞?

[code](https://elixir.bootlin.com/linux/latest/source/fs/seq_file.c#L171) ‚Äî –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `seq_read_iter` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `start`, `stop`, `next`, `show`, –ø–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ç–æ—á–∫–∞–º–∏ –≤—Ö–æ–¥–∞:
`.open`, `.read` –∏ –¥—Ä—É–≥–∏–µ `proc_ops` ‚Äî —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞, –≤—ã–∑—ã–≤–∞–µ–º—ã–µ —è–¥—Ä–æ–º –Ω–∞–ø—Ä—è–º—É—é, –∞ `seq_ops` ‚Äî —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π - `seq_start`, `seq_next`, `seq_stop`, `seq_show` ‚Äî —ç—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–±—ç–∫–∏, –≤—ã–∑—ã–≤–∞–µ–º—ã–µ –≤–Ω—É—Ç—Ä–∏ `seq_read_iter()`.


## Single (single_open)

1. üîê –ö–∞–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ?

*64 –ö–ë (16 —Å—Ç—Ä–∞–Ω–∏—Ü –ø–æ 4 –ö–ë) ‚Äî —ç—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –≤ `seq_file`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `single_open()`.
–ï—Å–ª–∏ –≤–∞—à –≤—ã–≤–æ–¥ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —ç—Ç–æ—Ç –æ–±—ä–µ–º, –æ–Ω –±—É–¥–µ—Ç —É—Å–µ—á—ë–Ω.
–≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ `single_show()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –∏ –≤–µ—Å—å –≤—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –ø–æ–º–µ—Å—Ç–∏—Ç—å—Å—è –∑–∞ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é.*

2. –ü–æ—á–µ–º—É `single_open()` –Ω–∞–∑—ã–≤–∞—é—Ç —É–ø—Ä–æ—â—ë–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º?

*–ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω:*
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç `seq_operations` –Ω—É–∂–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (`start`, `next`, `stop`) –∫–∞–∫ `NULL`, –∞ `show` ‚Äî –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–º –∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–µ–π.

* *–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –ø–∏—à–µ—Ç —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏—é `show()` –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤.
–≠—Ç–æ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–¥–∏–Ω —Ä–∞–∑, –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ (–∫–∞–∫ –≤ —Å–ª—É—á–∞–µ —Å `seq_open()`)*.

3. –ß—Ç–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –º–æ–¥—É–ª—å —á–µ—Ä–µ–∑ `write()`?

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `write()` –∫–∞–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:

* –í–≤–æ–¥ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `PID`'–æ–≤ (–∫–∞–∫ –≤ –≤–∞—à–µ–º –∫–æ–¥–µ).
* –í–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–º–µ–Ω—é, –æ–ø—Ü–∏–∏, —Ñ–ª–∞–≥–∏).
* –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö.

–¢–æ –µ—Å—Ç—å `write()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å `/proc-—Ñ–∞–π–ª` –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥–∞—ë—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∞ –∑–∞—Ç–µ–º `read()` –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ.

üîπ `struct seq_file *m` - —ç—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `seq_file`, –∫–æ—Ç–æ—Ä—É—é —è–¥—Ä–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—É—Ñ–µ—Ä–æ–º, –≤ –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç–µ –≤—ã–≤–æ–¥ (—á–µ—Ä–µ–∑ `seq_printf`, `seq_puts` –∏ —Ç. –¥.).

üìå –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `m` –≤–Ω—É—Ç—Ä–∏ `single_show()` —á—Ç–æ–±—ã –≤—ã–≤–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
* `seq_printf(m, "PID: %d\n", pid)`;

üîπ `void *v` - –≤ `single_show()` –ø–∞—Ä–∞–º–µ—Ç—Ä `v` –≤—Å–µ–≥–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è.

–û–Ω –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π `show()` –∏–∑ `seq_operations`, –≥–¥–µ `v` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –∏—Ç–µ—Ä–∞—Ü–∏–∏.

–í `single_open()` –∏ `single_show()` –∏—Ç–µ—Ä–∞—Ü–∏–∏ –Ω–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑.
–ü–æ—ç—Ç–æ–º—É `v` –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω `NULL`, –ª–∏–±–æ –∫–∞–∫ –∑–∞–≥–ª—É—à–∫–∞.

4. –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç `read` –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ? - `OPEN`.